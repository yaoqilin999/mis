"use strict";(self["webpackChunkinfosys"]=self["webpackChunkinfosys"]||[]).push([[167],{5167:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var t=a(3396);const i={class:"_iframe"},o={class:"_search-view"},d=(0,t.Uk)("搜索"),s=(0,t.Uk)("编辑"),n=(0,t.Uk)("其他"),u={class:"_page-view"};function m(e,l,a,m,p,r){const c=(0,t.up)("el-input"),f=(0,t.up)("el-option"),g=(0,t.up)("el-select"),h=(0,t.up)("DateSelecter"),b=(0,t.up)("el-button"),W=(0,t.up)("el-table-column"),w=(0,t.up)("el-table"),_=(0,t.up)("el-pagination"),V=(0,t.up)("EditDialog"),k=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",o,[(0,t.Wm)(c,{placeholder:"请输入",modelValue:p.searchInfo.name,"onUpdate:modelValue":l[0]||(l[0]=e=>p.searchInfo.name=e),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"]),(0,t.Wm)(g,{placeholder:"请选择",modelValue:p.searchInfo.type,"onUpdate:modelValue":l[1]||(l[1]=e=>p.searchInfo.type=e),filterable:"",clearable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{label:"一",value:"1"}),(0,t.Wm)(f,{label:"二",value:"2"})])),_:1},8,["modelValue"]),(0,t.Wm)(h,{start:p.searchInfo.start_time,"onUpdate:start":l[2]||(l[2]=e=>p.searchInfo.start_time=e),end:p.searchInfo.end_time,"onUpdate:end":l[3]||(l[3]=e=>p.searchInfo.end_time=e)},null,8,["start","end"]),(0,t.Wm)(b,{type:"primary",onClick:l[4]||(l[4]=e=>r.getList(1))},{default:(0,t.w5)((()=>[d])),_:1})]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(w,{data:p.list,onSelectionChange:r.selectionChange},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{type:"selection"}),(0,t.Wm)(W,{type:"index",label:"序号",width:"60"}),(0,t.Wm)(W,{prop:"date",label:"日期"}),(0,t.Wm)(W,{prop:"name",label:"姓名"}),(0,t.Wm)(W,{prop:"address",label:"地址"}),(0,t.Wm)(W,{label:"操作"},{default:(0,t.w5)((e=>[(0,t.Wm)(b,{type:"text",onClick:l=>r.handleEdit(e.row,e.$index)},{default:(0,t.w5)((()=>[s])),_:2},1032,["onClick"]),(0,t.Wm)(b,{type:"text",onClick:l=>r.handleChange(e.row,e.$index)},{default:(0,t.w5)((()=>[n])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[k,p.loading]]),(0,t._)("div",u,[(0,t.Wm)(_,{"current-page":p.page,"onUpdate:current-page":l[5]||(l[5]=e=>p.page=e),"page-size":p.pageSize,"onUpdate:page-size":l[6]||(l[6]=e=>p.pageSize=e),total:p.total,"page-sizes":e.$tmp.pageSizes,layout:e.$tmp.pageLayout,background:""},null,8,["current-page","page-size","total","page-sizes","layout"])]),(0,t.Wm)(V,{visible:p.editVisible,id:p.editId,onSuccess:l[7]||(l[7]=e=>{p.editVisible=!1,r.getList()}),onClose:l[8]||(l[8]=e=>p.editVisible=!1)},null,8,["visible","id"])])}const p={class:"_edit-btns"},r=(0,t.Uk)("保存"),c=(0,t.Uk)("取消");function f(e,l,a,i,o,d){const s=(0,t.up)("el-input"),n=(0,t.up)("el-form-item"),u=(0,t.up)("el-col"),m=(0,t.up)("el-option"),f=(0,t.up)("el-select"),g=(0,t.up)("el-row"),h=(0,t.up)("el-cascader"),b=(0,t.up)("el-date-picker"),W=(0,t.up)("el-switch"),w=(0,t.up)("el-checkbox"),_=(0,t.up)("el-checkbox-group"),V=(0,t.up)("el-radio"),k=(0,t.up)("el-radio-group"),y=(0,t.up)("el-form"),v=(0,t.up)("el-button"),U=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(U,{"custom-class":"_edit-dialog",title:o.pageTitle,modelValue:o.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>o.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,onClose:d.closeDialog},{default:(0,t.w5)((()=>[o.dialogVisible?((0,t.wg)(),(0,t.j4)(y,{key:0,model:o.info,ref:"info"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"活动名称:",prop:"name",rules:{required:!0,message:"活动名称不能为空"}},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{placeholder:"请输入",modelValue:o.info.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.info.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"活动区域:"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:o.info.region,"onUpdate:modelValue":l[1]||(l[1]=e=>o.info.region=e),filterable:"",clearable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"区域一",value:"1"}),(0,t.Wm)(m,{label:"区域二",value:"2"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"活动地址:"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{options:d.addrList,modelValue:o.info.address,"onUpdate:modelValue":l[2]||(l[2]=e=>o.info.address=e),filterable:"",clearable:""},null,8,["options","modelValue"])])),_:1})])),_:1}),(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"活动时间:"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{placeholder:"请选择",format:"YYYY-MM-DD","value-format":"X",modelValue:o.info.time,"onUpdate:modelValue":l[3]||(l[3]=e=>o.info.time=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"即时配送:"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:o.info.delivery,"onUpdate:modelValue":l[4]||(l[4]=e=>o.info.delivery=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"活动性质:"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{modelValue:o.info.type,"onUpdate:modelValue":l[5]||(l[5]=e=>o.info.type=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{label:"美食/餐厅线上活动"}),(0,t.Wm)(w,{label:"地推活动"}),(0,t.Wm)(w,{label:"线下主题活动"}),(0,t.Wm)(w,{label:"单纯品牌曝光"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"特殊资源:"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:o.info.resource,"onUpdate:modelValue":l[6]||(l[6]=e=>o.info.resource=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"线上品牌商赞助"}),(0,t.Wm)(V,{label:"线下场地免费"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{span:20},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"活动形式:"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{type:"textarea",placeholder:"0-500个字符",maxlength:"500",modelValue:o.info.desc,"onUpdate:modelValue":l[7]||(l[7]=e=>o.info.desc=e),autosize:{minRows:3},"show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])):(0,t.kq)("",!0),(0,t._)("div",p,[(0,t.Wm)(v,{type:"primary",onClick:l[8]||(l[8]=e=>d.submitForm("info")),loading:o.loading},{default:(0,t.w5)((()=>[r])),_:1},8,["loading"]),(0,t.Wm)(v,{onClick:d.closeDialog},{default:(0,t.w5)((()=>[c])),_:1},8,["onClick"])])])),_:1},8,["title","modelValue","onClose"])}var g={emits:["success","close"],props:{id:{type:[String,Number],default:""},visible:{type:Boolean,default:!1}},data(){return{dialogVisible:!1,pageTitle:"",info:{},loading:!1}},computed:{addrList(){return this.$store.state.common.addrList}},watch:{visible(e){this.dialogVisible=e,e?(this.pageTitle=this.id?"编辑":"新建",this.id&&this.getInfo()):Object.assign(this.$data,this.$options.data.call(this))}},methods:{closeDialog(){this.$emit("close")},submitInfo(){this.loading=!0;this.id;let e=this.id?"修改":"添加";setTimeout((()=>{this.loading=!1,this.$message.success(`${e}成功`),this.$emit("success")}),1e3)},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;this.submitInfo()}))},getInfo(){this.info={name:"活动名123"}}}},h=a(89);const b=(0,h.Z)(g,[["render",f]]);var W=b,w={components:{EditDialog:W},data(){return{list:[],page:1,total:0,pageSize:this.$tmp.pageSizes[0],searchInfo:{},loading:!1,selectIds:"",selectMenu:{},editVisible:!1,editId:""}},watch:{page(e){this.getList(e)},pageSize(e){this.getList(1)}},created(){this.getList(),this.getSelectMenu()},methods:{handleChange(e,l){this.list[l].name="张三"},handleEdit(e,l){this.editId=l+1,this.editVisible=!0},getList(e){e&&this.page!==e?this.page=e:(this.loading=!0,setTimeout((()=>{this.list=[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{id:3,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],this.total=this.list.length,this.loading=!1}),300))},selectionChange(e){let l=[];e.forEach((e=>{l.push(e.order_id)})),this.selectIds=l.toString()},getSelectMenu(){}}};const _=(0,h.Z)(w,[["render",m]]);var V=_}}]);