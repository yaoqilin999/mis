"use strict";(self["webpackChunkxinxi"]=self["webpackChunkxinxi"]||[]).push([[255],{255:function(e,l,a){a.r(l),a.d(l,{default:function(){return P}});var u=a(3396),i=a(2268),t=a(4870);const n=(0,u.Uk)("启用"),o=(0,u.Uk)("禁用"),s={class:"tree-view"},d={class:"tree-li"},c=(0,u.Uk)("菜单"),p=(0,u.Uk)("权限"),r={class:"_edit-btns"},m=(0,u.Uk)("取消"),v=(0,u.Uk)("保存");var f={__name:"EditDialog",props:{id:{type:[String,Number],default:""},visible:{type:Boolean,default:!1}},emits:["success","close"],setup(e,{emit:l}){const a=e,{appContext:f}=(0,u.FN)(),_=f.app.config.globalProperties,g=(0,t.iH)(!1),w=(0,t.iH)(""),b=(0,t.Vh)(a,"id"),k=(0,t.Vh)(a,"visible");(0,u.YP)(k,(e=>{g.value=k.value,e?(w.value=b.value?"编辑":"添加",b.value&&y(),U(),$()):w.value=""}));const h=(0,t.iH)({});function y(){}(0,u.YP)(g,(e=>{e||(h.value={})}));const W=(0,t.iH)(!1);function H(){b.value;let e=b.value?"修改":"添加";W.value=!0,setTimeout((()=>{W.value=!1,_.$message.success(`${e}成功`),l("success")}),300)}(0,u.YP)(g,(e=>{e||(W.value=!1)}));const V=(0,t.iH)(null);function x(){V.value.validate((e=>{if(!e)return console.log("error submit!!"),!1;H()}))}const C=(0,t.iH)({});function U(){}(0,u.YP)(g,(e=>{e||(C.value={})}));const z=(0,t.iH)([]),P=(0,t.iH)({label:"name"}),Y=(0,t.iH)([]);function $(){Y.value=[{id:1,name:"一级 1",children:[{id:4,name:"二级 1-1",children:[{id:9,name:"三级 1-1-1"},{id:10,name:"三级 1-1-2"}]}]},{id:2,name:"一级 2",children:[{id:5,name:"二级 2-1"},{id:6,name:"二级 2-2"}]},{id:3,name:"一级 3",children:[{id:7,name:"二级 3-1"},{id:8,name:"二级 3-2"}]}]}(0,u.YP)(g,(e=>{e||(Y.value=[])}));const S=(0,t.iH)([]),D=(0,t.iH)([]);function I(e,l,a){let u=-1;(l||a)&&(u=S.value.findIndex((l=>l===e.id)),-1===u&&S.value.push(e.id)),l&&!a&&(u=D.value.findIndex((l=>l===e.id)),-1===u&&D.value.push(e.id)),l||a||(u=S.value.findIndex((l=>l===e.id)),u>-1&&S.value.splice(u,1),u=D.value.findIndex((l=>l===e.id)),u>-1&&D.value.splice(u,1))}return(e,a)=>{const t=(0,u.up)("el-input"),f=(0,u.up)("el-form-item"),_=(0,u.up)("el-radio"),b=(0,u.up)("el-radio-group"),k=(0,u.up)("el-tag"),y=(0,u.up)("el-tree"),H=(0,u.up)("el-form"),C=(0,u.up)("el-button"),U=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(U,{"custom-class":"_edit-dialog-2 __role_edit_dialog",title:w.value,modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value=e),"close-on-click-modal":!1,"close-on-press-escape":!1,onClose:a[5]||(a[5]=e=>l("close"))},{default:(0,u.w5)((()=>[g.value?((0,u.wg)(),(0,u.j4)(H,{key:0,model:h.value,ref_key:"formRef",ref:V},{default:(0,u.w5)((()=>[(0,u.Wm)(f,{label:"角色名称:",prop:"name",rules:{required:!0,message:"角色名称不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{placeholder:"请输入",modelValue:h.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(f,{label:"角色状态:",prop:"status",rules:{required:!0,message:"角色状态不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{modelValue:h.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value.status=e)},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{label:1},{default:(0,u.w5)((()=>[n])),_:1}),(0,u.Wm)(_,{label:2},{default:(0,u.w5)((()=>[o])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(f,{label:"菜单资源:",required:""}),(0,u.Wm)(f,{label:" ",style:{"margin-top":"-50px"}},{default:(0,u.w5)((()=>[(0,u._)("div",s,[(0,u.Wm)(y,{"node-key":"id","show-checkbox":"",data:Y.value,props:P.value,"expand-on-click-node":!1,"default-checked-keys":z.value,onCheckChange:I},{default:(0,u.w5)((({node:e,data:l})=>[(0,u._)("div",d,[(0,u.Wm)(k,{size:"small"},{default:(0,u.w5)((()=>[c])),_:1}),(0,u.Wm)(k,{size:"small",type:"warning"},{default:(0,u.w5)((()=>[p])),_:1}),(0,u._)("span",null,(0,i.zw)(l.name||"未命名"),1)])])),_:1},8,["data","props","default-checked-keys"])])])),_:1}),(0,u.Wm)(f,{label:"备注:"},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{type:"textarea",placeholder:"0-500个字符",maxlength:"500",modelValue:h.value.user_info,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value.user_info=e),autosize:{minRows:4},"show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])):(0,u.kq)("",!0),(0,u._)("div",r,[(0,u.Wm)(C,{onClick:a[3]||(a[3]=e=>l("close"))},{default:(0,u.w5)((()=>[m])),_:1}),(0,u.Wm)(C,{type:"primary",onClick:x,loading:W.value},{default:(0,u.w5)((()=>[v])),_:1},8,["loading"])])])),_:1},8,["title","modelValue"])}}};const _=f;var g=_;const w={class:"_iframe"},b={class:"_search-view"},k=(0,u.Uk)("搜索"),h={class:"_handle-view"},y=(0,u.Uk)("新建"),W={key:0,class:"_tip-success"},H={key:1,class:"_tip-danger"},V=["onClick"],x=["onClick"],C={class:"_page-view"};var U={__name:"index",setup(e){const{appContext:l}=(0,u.FN)(),a=l.app.config.globalProperties,i=(0,t.iH)([]),n=(0,t.iH)(0),o=(0,t.iH)(1);(0,u.YP)(o,(e=>p(e)));const s=(0,t.iH)(a.$tmp.pageSizes[0]);(0,u.YP)(s,(()=>p(1)));const d=(0,t.iH)(!1),c=(0,t.iH)({});function p(e){e&&o.value!==e?o.value=e:(d.value=!0,setTimeout((()=>{d.value=!1,i.value=a.$store.state.testList}),300))}function r(e){a.$confirm("确定要删除该记录？","提示",{type:"warning"}).then((()=>{a.$message.success("删除成功");let l=i.value.findIndex((l=>l.id===e.id));i.value.splice(l,1)}))}p();const m=(0,t.iH)("");function v(e){let l=[];e.forEach((e=>l.push(e.order_id))),m.value=l.toString()}const f=(0,t.iH)({});function _(){}_();const U=(0,t.iH)(!1),z=(0,t.iH)("");function P(e){z.value=e.id,U.value=!0}return(e,l)=>{const a=(0,u.up)("el-input"),t=(0,u.up)("el-option"),m=(0,u.up)("el-select"),_=(0,u.up)("el-button"),Y=(0,u.up)("el-table-column"),$=(0,u.up)("el-table"),S=(0,u.up)("el-pagination"),D=(0,u.Q2)("loading");return(0,u.wg)(),(0,u.iD)("div",w,[(0,u._)("div",b,[(0,u._)("table",null,[(0,u._)("tr",null,[(0,u._)("td",null,[(0,u.Wm)(a,{placeholder:"请输入角色名称",modelValue:c.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),(0,u._)("td",null,[(0,u.Wm)(m,{placeholder:"请选择角色状态",modelValue:c.value.source_id,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value.source_id=e),filterable:"",clearable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(f.value.source_type,(e=>((0,u.wg)(),(0,u.j4)(t,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,u._)("td",null,[(0,u.Wm)(_,{type:"primary",onClick:l[2]||(l[2]=e=>p(1))},{default:(0,u.w5)((()=>[k])),_:1})])])])]),(0,u._)("div",h,[(0,u.Wm)(_,{type:"primary",plain:"",onClick:l[3]||(l[3]=e=>{z.value="",U.value=!0})},{default:(0,u.w5)((()=>[y])),_:1})]),(0,u.wy)(((0,u.wg)(),(0,u.j4)($,{data:i.value,onSelectionChange:v},{default:(0,u.w5)((()=>[(0,u.Wm)(Y,{type:"selection"}),(0,u.Wm)(Y,{type:"index",label:"序号",width:"60"}),(0,u.Wm)(Y,{prop:"name",label:"角色名称"}),(0,u.Wm)(Y,{prop:"name",label:"备注"}),(0,u.Wm)(Y,{label:"角色状态"},{default:(0,u.w5)((e=>[1===e.row.status?((0,u.wg)(),(0,u.iD)("span",W,"启用")):((0,u.wg)(),(0,u.iD)("span",H,"禁用"))])),_:1}),(0,u.Wm)(Y,{label:"操作"},{default:(0,u.w5)((e=>[(0,u._)("span",{class:"_btn-link",onClick:l=>P(e.row)},"编辑",8,V),(0,u._)("span",{class:"_btn-link _btn-danger",onClick:l=>r(e.row)},"删除",8,x)])),_:1})])),_:1},8,["data"])),[[D,d.value]]),(0,u._)("div",C,[(0,u.Wm)(S,{"current-page":o.value,"onUpdate:current-page":l[4]||(l[4]=e=>o.value=e),"page-size":s.value,"onUpdate:page-size":l[5]||(l[5]=e=>s.value=e),total:n.value,"page-sizes":e.$tmp.pageSizes,layout:e.$tmp.pageLayout,background:""},null,8,["current-page","page-size","total","page-sizes","layout"])]),(0,u.Wm)(g,{visible:U.value,id:z.value,onSuccess:l[6]||(l[6]=e=>{U.value=!1,p()}),onClose:l[7]||(l[7]=e=>U.value=!1)},null,8,["visible","id"])])}}};const z=U;var P=z}}]);