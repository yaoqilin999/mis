"use strict";(self["webpackChunkxinxi"]=self["webpackChunkxinxi"]||[]).push([[435],{4447:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var u=a(3396),i=a(265),o=a(4870);const n={key:0,class:"loading"},t=(0,u._)("img",{class:"load-icon",src:i},null,-1),s=[t],d={key:1},A=["src"],c={key:1,class:"icon"},p={class:"_edit-btns"},m=(0,u.Uk)("取消"),r=(0,u.Uk)("保存");var v={__name:"EditDialog",props:{id:{type:[String,Number],default:""},visible:{type:Boolean,default:!1}},emits:["success","close"],setup(e,{emit:l}){const a=e,{appContext:i}=(0,u.FN)(),t=i.app.config.globalProperties,v=(0,o.iH)(!1),g=(0,o.iH)(""),w=(0,o.Vh)(a,"id"),f=(0,o.Vh)(a,"visible");(0,u.YP)(f,(e=>{v.value=f.value,e?(g.value=w.value?"编辑":"添加",w.value&&B(),Q()):g.value=""}));const h=(0,o.iH)({});function B(){}(0,u.YP)(v,(e=>{e||(h.value={})}));const C=(0,o.iH)(!1);function k(){w.value;let e=w.value?"修改":"添加";C.value=!0,setTimeout((()=>{C.value=!1,t.$message.success(`${e}成功`),l("success")}),300)}(0,u.YP)(v,(e=>{e||(C.value=!1)}));const b=(0,o.iH)(null);function _(){b.value.validate((e=>{if(!e)return console.log("error submit!!"),!1;k()}))}const E=(0,o.iH)({});function Q(){}(0,u.YP)(v,(e=>{e||(E.value={})}));const H=(0,o.iH)(null),W=(0,o.iH)(!1);function D(e){let l=e.file,a=new FormData;a.append("file[]",l),a.append("type",1);let u="https://jsonplaceholder.typicode.com/posts/";W.value=!0,t.$http.post(u,a,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4}).then((e=>{W.value=!1,h.value.userimg=e})).catch((e=>{W.value=!1,e.data.id&&(h.value.userimg="https://fuss10.elemecdn.com/3/28/bbf893f792f03a54408b3b7a7ebf0jpeg.jpeg")})),H.value.clearFiles()}return(0,u.YP)(v,(e=>{e||(W.value=!1)})),(e,a)=>{const i=(0,u.up)("el-option"),o=(0,u.up)("el-select"),t=(0,u.up)("el-form-item"),w=(0,u.up)("el-input"),f=(0,u.up)("el-upload"),B=(0,u.up)("el-form"),k=(0,u.up)("el-button"),Q=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(Q,{"custom-class":"_edit-dialog-2",title:g.value,modelValue:v.value,"onUpdate:modelValue":a[7]||(a[7]=e=>v.value=e),"close-on-click-modal":!1,"close-on-press-escape":!1,onClose:a[8]||(a[8]=e=>l("close"))},{default:(0,u.w5)((()=>[v.value?((0,u.wg)(),(0,u.j4)(B,{key:0,model:h.value,ref_key:"formRef",ref:b},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{label:"所属机构:",prop:"name",rules:{required:!0,message:"所属机构不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{placeholder:"请选择",modelValue:h.value.source_id,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value.source_id=e),filterable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(E.value.source_type,(e=>((0,u.wg)(),(0,u.j4)(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(t,{label:"用户名:",prop:"name",rules:{required:!0,message:"用户名不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(w,{placeholder:"请输入",modelValue:h.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(t,{label:"密码:",prop:"name",rules:{required:!0,message:"密码不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(w,{placeholder:"请输入",modelValue:h.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value.name=e),modelModifiers:{trim:!0},"show-password":""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(t,{label:"确认密码:",prop:"name",rules:{required:!0,message:"确认密码不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(w,{placeholder:"请输入",modelValue:h.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value.name=e),modelModifiers:{trim:!0},"show-password":""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(t,{label:"关联角色:",prop:"name",rules:{required:!0,message:"关联角色不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{placeholder:"请选择",modelValue:h.value.source_id,"onUpdate:modelValue":a[4]||(a[4]=e=>h.value.source_id=e),filterable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(E.value.source_type,(e=>((0,u.wg)(),(0,u.j4)(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(t,{label:"头像:"},{default:(0,u.w5)((()=>[(0,u.Wm)(f,{ref_key:"upload1",ref:H,accept:"image/*",action:"#",class:"_upload-view",disabled:W.value,"show-file-list":!1,"http-request":D},{default:(0,u.w5)((()=>[W.value?((0,u.wg)(),(0,u.iD)("div",n,s)):((0,u.wg)(),(0,u.iD)("div",d,[h.value.userimg?((0,u.wg)(),(0,u.iD)("img",{key:0,class:"img",src:h.value.userimg},null,8,A)):((0,u.wg)(),(0,u.iD)("div",c,"+"))]))])),_:1},8,["disabled"])])),_:1}),(0,u.Wm)(t,{label:"备注:"},{default:(0,u.w5)((()=>[(0,u.Wm)(w,{type:"textarea",placeholder:"0-500个字符",maxlength:"500",modelValue:h.value.user_info,"onUpdate:modelValue":a[5]||(a[5]=e=>h.value.user_info=e),autosize:{minRows:4},"show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])):(0,u.kq)("",!0),(0,u._)("div",p,[(0,u.Wm)(k,{onClick:a[6]||(a[6]=e=>l("close"))},{default:(0,u.w5)((()=>[m])),_:1}),(0,u.Wm)(k,{type:"primary",onClick:_,loading:C.value},{default:(0,u.w5)((()=>[r])),_:1},8,["loading"])])])),_:1},8,["title","modelValue"])}}};const g=v;var w=g,f=a(2268);const h={class:"tree-li"},B=(0,u.Uk)("菜单"),C=(0,u.Uk)("权限"),k={class:"_edit-btns"},b=(0,u.Uk)("取消"),_=(0,u.Uk)("保存");var E={__name:"PowerDialog",props:{info:{type:Object,default(){return{}}},visible:{type:Boolean,default:!1}},emits:["success","close"],setup(e,{emit:l}){const a=e,{appContext:i}=(0,u.FN)(),n=i.app.config.globalProperties,t=(0,o.iH)(!1),s=(0,o.Vh)(a,"visible");(0,u.YP)(s,(e=>{t.value=s.value,e&&r()}));const d=(0,o.iH)(!1);function A(){d.value=!0,setTimeout((()=>{d.value=!1,n.$message.success("修改成功"),l("close")}),300)}const c=(0,o.iH)([]),p=(0,o.iH)({label:"name"}),m=(0,o.iH)([]);function r(){m.value=[{id:1,name:"一级 1",children:[{id:4,name:"二级 1-1",children:[{id:9,name:"三级 1-1-1"},{id:10,name:"三级 1-1-2"}]}]},{id:2,name:"一级 2",children:[{id:5,name:"二级 2-1"},{id:6,name:"二级 2-2"}]},{id:3,name:"一级 3",children:[{id:7,name:"二级 3-1"},{id:8,name:"二级 3-2"}]}]}(0,u.YP)(t,(e=>{e||(m.value=[])}));const v=(0,o.iH)([]),g=(0,o.iH)([]);function w(e,l,a){let u=-1;(l||a)&&(u=v.value.findIndex((l=>l===e.id)),-1===u&&v.value.push(e.id)),l&&!a&&(u=g.value.findIndex((l=>l===e.id)),-1===u&&g.value.push(e.id)),l||a||(u=v.value.findIndex((l=>l===e.id)),u>-1&&v.value.splice(u,1),u=g.value.findIndex((l=>l===e.id)),u>-1&&g.value.splice(u,1))}return(e,a)=>{const i=(0,u.up)("el-tag"),o=(0,u.up)("el-tree"),n=(0,u.up)("el-button"),s=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(s,{"custom-class":"_edit-dialog-2 __account_power_dialog",title:"权限配置",modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),onClose:a[2]||(a[2]=e=>l("close"))},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{"node-key":"id","show-checkbox":"",data:m.value,props:p.value,"expand-on-click-node":!1,"default-checked-keys":c.value,onCheckChange:w},{default:(0,u.w5)((({node:e,data:l})=>[(0,u._)("div",h,[(0,u.Wm)(i,{size:"small"},{default:(0,u.w5)((()=>[B])),_:1}),(0,u.Wm)(i,{size:"small",type:"warning"},{default:(0,u.w5)((()=>[C])),_:1}),(0,u._)("span",null,(0,f.zw)(l.name||"未命名"),1)])])),_:1},8,["data","props","default-checked-keys"]),(0,u._)("div",k,[(0,u.Wm)(n,{onClick:a[0]||(a[0]=e=>l("close"))},{default:(0,u.w5)((()=>[b])),_:1}),(0,u.Wm)(n,{type:"primary",onClick:A,loading:d.value},{default:(0,u.w5)((()=>[_])),_:1},8,["loading"])])])),_:1},8,["modelValue"])}}};const Q=E;var H=Q;const W={class:"_iframe"},D={class:"_search-view"},y=(0,u.Uk)("搜索"),V={class:"_handle-view"},I=(0,u.Uk)("新建"),Y={key:0,class:"_tip-success"},U={key:1,class:"_tip-danger"},F=["onClick"],x=(0,u._)("span",{class:"_btn-link"},"更多",-1),M=["onClick"],K=(0,u._)("br",null,null,-1),N=["onClick"],G=(0,u._)("br",null,null,-1),R=["onClick"],J={class:"_page-view"};var O={__name:"index",setup(e){const{appContext:l}=(0,u.FN)(),a=l.app.config.globalProperties,i=(0,o.iH)([]),n=(0,o.iH)(0),t=(0,o.iH)(1);(0,u.YP)(t,(e=>c(e)));const s=(0,o.iH)(a.$tmp.pageSizes[0]);(0,u.YP)(s,(()=>c(1)));const d=(0,o.iH)(!1),A=(0,o.iH)({});function c(e){e&&t.value!==e?t.value=e:(d.value=!0,setTimeout((()=>{d.value=!1,i.value=a.$store.state.testList}),300))}function p(e){a.$confirm("确定要删除该记录？","提示",{type:"warning"}).then((()=>{a.$message.success("删除成功");let l=i.value.findIndex((l=>l.id===e.id));i.value.splice(l,1)}))}c();const m=(0,o.iH)("");function r(e){let l=[];e.forEach((e=>l.push(e.order_id))),m.value=l.toString()}const v=(0,o.iH)({});function g(){}g();const f=(0,o.iH)(!1),h=(0,o.iH)("");function B(e){h.value=e.id,f.value=!0}const C=(0,o.iH)(!1);function k(e){C.value=!0}function b(e){a.$confirm("确定要重置密码为 123456 吗？","提示",{type:"warning"}).then((()=>{a.$message.success("重置成功")}))}return(e,l)=>{const a=(0,u.up)("el-input"),o=(0,u.up)("el-option"),m=(0,u.up)("el-select"),g=(0,u.up)("el-button"),_=(0,u.up)("el-table-column"),E=(0,u.up)("el-tooltip"),Q=(0,u.up)("el-table"),O=(0,u.up)("el-pagination"),S=(0,u.Q2)("loading");return(0,u.wg)(),(0,u.iD)("div",W,[(0,u._)("div",D,[(0,u._)("table",null,[(0,u._)("tr",null,[(0,u._)("td",null,[(0,u.Wm)(a,{placeholder:"请输入用户名",modelValue:A.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>A.value.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),(0,u._)("td",null,[(0,u.Wm)(m,{placeholder:"请选择用户状态",modelValue:A.value.source_id,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value.source_id=e),filterable:"",clearable:""},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(v.value.source_type,(e=>((0,u.wg)(),(0,u.j4)(o,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,u._)("td",null,[(0,u.Wm)(g,{type:"primary",onClick:l[2]||(l[2]=e=>c(1))},{default:(0,u.w5)((()=>[y])),_:1})])])])]),(0,u._)("div",V,[(0,u.Wm)(g,{type:"primary",plain:"",onClick:l[3]||(l[3]=e=>{h.value="",f.value=!0})},{default:(0,u.w5)((()=>[I])),_:1})]),(0,u.wy)(((0,u.wg)(),(0,u.j4)(Q,{data:i.value,onSelectionChange:r},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{type:"selection"}),(0,u.Wm)(_,{type:"index",label:"序号",width:"60"}),(0,u.Wm)(_,{prop:"name",label:"用户名"}),(0,u.Wm)(_,{prop:"name",label:"关联角色"}),(0,u.Wm)(_,{prop:"name",label:"头像"}),(0,u.Wm)(_,{prop:"name",label:"所属机构名称"}),(0,u.Wm)(_,{label:"账号状态"},{default:(0,u.w5)((e=>[1===e.row.status?((0,u.wg)(),(0,u.iD)("span",Y,"启用")):((0,u.wg)(),(0,u.iD)("span",U,"禁用"))])),_:1}),(0,u.Wm)(_,{prop:"name",label:"创建时间"}),(0,u.Wm)(_,{label:"操作"},{default:(0,u.w5)((e=>[(0,u._)("span",{class:"_btn-link",onClick:l=>B(e.row)},"编辑",8,F),(0,u.Wm)(E,{placement:"bottom-end",effect:"light","popper-class":"_table-more-btns"},{content:(0,u.w5)((()=>[(0,u._)("span",{class:"_btn-link",onClick:l=>k(e.row)},"权限配置",8,M),K,(0,u._)("span",{class:"_btn-link",onClick:l=>b(e.row)},"重置密码",8,N),G,(0,u._)("span",{class:"_btn-link _btn-danger",onClick:l=>p(e.row)},"删除",8,R)])),default:(0,u.w5)((()=>[x])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[S,d.value]]),(0,u._)("div",J,[(0,u.Wm)(O,{"current-page":t.value,"onUpdate:current-page":l[4]||(l[4]=e=>t.value=e),"page-size":s.value,"onUpdate:page-size":l[5]||(l[5]=e=>s.value=e),total:n.value,"page-sizes":e.$tmp.pageSizes,layout:e.$tmp.pageLayout,background:""},null,8,["current-page","page-size","total","page-sizes","layout"])]),(0,u.Wm)(w,{visible:f.value,id:h.value,onSuccess:l[6]||(l[6]=e=>{f.value=!1,c()}),onClose:l[7]||(l[7]=e=>f.value=!1)},null,8,["visible","id"]),(0,u.Wm)(H,{visible:C.value,onClose:l[8]||(l[8]=e=>C.value=!1)},null,8,["visible"])])}}};const S=O;var T=S},265:function(e){e.exports="data:image/gif;base64,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"}}]);