"use strict";(self["webpackChunkxinxi"]=self["webpackChunkxinxi"]||[]).push([[770],{8770:function(e,l,a){a.r(l),a.d(l,{default:function(){return U}});var u=a(3396),t=a(2268),n=a(4870);const o=(0,u.Uk)("仅权限"),i=(0,u.Uk)("菜单"),s=(0,u._)("span",null," + ",-1),d=(0,u.Uk)("权限"),p={class:"_edit-btns"},r=(0,u.Uk)("取消"),m=(0,u.Uk)("保存");var c={__name:"EditDialog",props:{id:{type:[String,Number],default:""},visible:{type:Boolean,default:!1}},emits:["success","close"],setup(e,{emit:l}){const a=e,{appContext:t}=(0,u.FN)(),c=t.app.config.globalProperties,v=(0,n.iH)(!1),f=(0,n.iH)(""),_=(0,n.Vh)(a,"id"),w=(0,n.Vh)(a,"visible");(0,u.YP)(w,(e=>{v.value=w.value,e?(f.value=_.value?"编辑":"添加",_.value&&g(),H(),P()):f.value=""}));const b=(0,n.iH)({});function g(){}(0,u.YP)(v,(e=>{e||(b.value={})}));const k=(0,n.iH)(!1);function W(){_.value;let e=_.value?"修改":"添加";k.value=!0,setTimeout((()=>{k.value=!1,c.$message.success(`${e}成功`),l("success")}),300)}(0,u.YP)(v,(e=>{e||(k.value=!1)}));const y=(0,n.iH)(null);function V(){y.value.validate((e=>{if(!e)return console.log("error submit!!"),!1;W()}))}const C=(0,n.iH)({});function H(){}(0,u.YP)(v,(e=>{e||(C.value={})}));const U=(0,n.iH)([]),x=(0,n.iH)([]),h=(0,n.iH)({checkStrictly:!0});function P(){}return(e,a)=>{const t=(0,u.up)("el-tag"),n=(0,u.up)("el-radio"),c=(0,u.up)("el-radio-group"),_=(0,u.up)("el-form-item"),w=(0,u.up)("el-cascader"),g=(0,u.up)("el-input"),W=(0,u.up)("el-form"),C=(0,u.up)("el-button"),H=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.j4)(H,{"custom-class":"_edit-dialog-2",title:f.value,modelValue:v.value,"onUpdate:modelValue":a[5]||(a[5]=e=>v.value=e),"close-on-click-modal":!1,"close-on-press-escape":!1,onClose:a[6]||(a[6]=e=>l("close"))},{default:(0,u.w5)((()=>[v.value?((0,u.wg)(),(0,u.j4)(W,{key:0,model:b.value,ref_key:"formRef",ref:y},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{label:"类型:",prop:"type",rules:{required:!0,message:"类型不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(c,{modelValue:b.value.type,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value.type=e)},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{label:1},{default:(0,u.w5)((()=>[(0,u.Wm)(t,{type:"warning"},{default:(0,u.w5)((()=>[o])),_:1})])),_:1}),(0,u.Wm)(n,{label:2},{default:(0,u.w5)((()=>[(0,u.Wm)(t,null,{default:(0,u.w5)((()=>[i])),_:1}),s,(0,u.Wm)(t,{type:"warning"},{default:(0,u.w5)((()=>[d])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"父级:",required:""}),(0,u.Wm)(_,{label:" ",style:{"margin-top":"-50px"}},{default:(0,u.w5)((()=>[(0,u.Wm)(w,{modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),options:x.value,props:h.value,filterable:""},null,8,["modelValue","options","props"])])),_:1}),(0,u.Wm)(_,{label:"名称:",prop:"name",rules:{required:!0,message:"名称不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(g,{placeholder:"请输入",modelValue:b.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"规则:",prop:"name",rules:{required:!0,message:"规则不能为空"}},{default:(0,u.w5)((()=>[(0,u.Wm)(g,{placeholder:"请输入",modelValue:b.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value.name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])):(0,u.kq)("",!0),(0,u._)("div",p,[(0,u.Wm)(C,{onClick:a[4]||(a[4]=e=>l("close"))},{default:(0,u.w5)((()=>[r])),_:1}),(0,u.Wm)(C,{type:"primary",onClick:V,loading:k.value},{default:(0,u.w5)((()=>[m])),_:1},8,["loading"])])])),_:1},8,["title","modelValue"])}}};const v=c;var f=v,_=a(7139);const w={class:"_iframe"},b={class:"_handle-view"},g=(0,u.Uk)("新建"),k=(0,u.Uk)("菜单"),W=(0,u.Uk)("权限"),y=["onClick"],V=["onClick"];var C={__name:"index",setup(e){const l=(0,_.oR)(),{appContext:a}=(0,u.FN)(),o=a.app.config.globalProperties,i=(0,n.iH)([]),s=(0,n.iH)(!1);function d(){s.value=!0,setTimeout((()=>{s.value=!1,i.value=JSON.parse(JSON.stringify(l.state.testList))}),300)}function p(e){o.$confirm("确定要删除该记录？","提示",{type:"warning"}).then((()=>{o.$message.success("删除成功");let l=i.value.findIndex((l=>l.id===e.id));i.value.splice(l,1)}))}d();const r=(0,n.iH)(!1),m=(0,n.iH)(!1),c=(0,n.iH)("");function v(e){c.value=e.id,m.value=!0}return(e,l)=>{const a=(0,u.up)("el-button"),n=(0,u.up)("el-table-column"),o=(0,u.up)("el-tag"),_=(0,u.up)("el-table"),C=(0,u.Q2)("loading");return(0,u.wg)(),(0,u.iD)("div",w,[(0,u._)("div",b,[(0,u.Wm)(a,{type:"primary",plain:"",onClick:l[0]||(l[0]=e=>{c.value="",m.value=!0})},{default:(0,u.w5)((()=>[g])),_:1}),(0,u.Wm)(a,{onClick:l[1]||(l[1]=e=>r.value=!r.value)},{default:(0,u.w5)((()=>[(0,u.Uk)((0,t.zw)(r.value?"收起":"展开")+"菜单",1)])),_:1})]),(0,u.wy)(((0,u.wg)(),(0,u.j4)(_,{data:i.value,"row-key":"id","default-expand-all":r.value},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{prop:"id",label:"ID"}),(0,u.Wm)(n,{prop:"name",label:"类型"},{default:(0,u.w5)((e=>[(0,u.Wm)(o,null,{default:(0,u.w5)((()=>[k])),_:1}),(0,u.Wm)(o,{type:"warning"},{default:(0,u.w5)((()=>[W])),_:1})])),_:1}),(0,u.Wm)(n,{prop:"name",label:"菜单名称"}),(0,u.Wm)(n,{prop:"name",label:"父级ID"}),(0,u.Wm)(n,{prop:"name",label:"规则"}),(0,u.Wm)(n,{label:"操作"},{default:(0,u.w5)((e=>[(0,u._)("span",{class:"_btn-link",onClick:l=>v(e.row)},"编辑",8,y),(0,u._)("span",{class:"_btn-link _btn-danger",onClick:l=>p(e.row)},"删除",8,V)])),_:1})])),_:1},8,["data","default-expand-all"])),[[C,s.value]]),(0,u.Wm)(f,{visible:m.value,id:c.value,onSuccess:l[2]||(l[2]=e=>{m.value=!1,d()}),onClose:l[3]||(l[3]=e=>m.value=!1)},null,8,["visible","id"])])}}};const H=C;var U=H}}]);